<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="Natural language processing from NLTK and machine learning to determine whether or not a news source is fake source." />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta property="og:description" content="Natural language processing from NLTK and machine learning to determine whether or not a news source is fake source." />
    <link href="{{ url_for('static', filename='css/styles.css')}}" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" rel="stylesheet">
    <link href="https://afeld.github.io/emoji-css/emoji.css" rel="stylesheet">
    <script src="{{ url_for('static', filename='js/jquery-3.1.1.min.js')}}" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js" type="text/javascript"></script>

    <title>Fake News</title>
  </head>

  <body>
    <div class="title-container">
      <hgroup>
        <h1><a href="/">Check Link</a></h1>
        <h2>Check whether or not a news source is fake news!</h2>
      </hgroup>
    </div>

    <div class="search-container">
      <!--<form id="search" class="search" onsubmit="check_link()">-->
      <input id = "search" class="search-bar" type="text" name="search" placeholder="Enter the article link here..."></br> </br>
        <button  class="btn" onclick="check_link();">Submit</button>
      <!--</form>-->
    </div>

    <footer class="home">
      <div class="footer-content">
        Made by <a href="https://github.com/PandaWhoCodes">Ashish Cherian</a>and <a href="https://github.com/mzmmoazam">Moazam</a> &copy; 2018. All Rights Reserved.
      </div>
    </footer>
  </body>
<script>
  function check_link()
  {
  var url = document.getElementById("search").value
  var domain = url = url.replace(/^(?:https?:\/\/)?(?:www\.)?/i, "").split('/')[0];
  console.log(httpGet(domain));
  }

  function httpGet(theUrl)
{
    //theUrl = "http://www.fakenewsai.com/detect?url=http%3A%2F%2F" + theUrl;
    //var data1 = {"URL":theUrl};
    var url = "/dorequest?url="+theUrl;
$.ajax({
	async: false,
	type: 'GET',
	url : url,
	success: function(data) {
		console.log(data);
		var res = data["data"];
		if (res["error"] == true)
		{ swal ( "Oops" ,  "Looks like we don't have any data on the website!" ,  "error" );
	}
	else
	{
	if(res["fake"] == false )
	 swal("Safe", "The news is not fake!", "success");
	}
	if(res["fake"] == true )
	{
	swal ( "Fake" ,  "Looks like the website serves fake content!" ,  "error" );
	}
	}
});
}


</script>
</html>
